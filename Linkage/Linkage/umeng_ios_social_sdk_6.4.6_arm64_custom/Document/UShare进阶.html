<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="markdown.css"></link></head><body>
</body></html><h1>第三方平台SDK说明</h1>
<h2>微信</h2>
<h3>U-Share 4/5 升级说明</h3>
<p>如果是U-Share4/5版本升级到6.0以上版本，需注意：</p>
<ol>
<li>如果已经使用4/5版本的usid作为服务端用户标识，在新版中保持使用usid字段</li>
<li>具体U-Share提供的id类型可参考「U-Share第三方登录」</li>
</ol>
<blockquote>
<p>unionId简介：开发者在QQ互联平台下拥有的多个移动应用、网站应用，获取的用户unionId是相同的，详情参考<a href="https://mp.weixin.qq.com/wiki/14/bb5031008f1494a59c6f71fa0f319c66.html">微信获取用户基本信息(UnionID机制)</a>。</p>
</blockquote>
<h2>新浪微博</h2>
<h3>配置ATS以支持访问HTTP请求</h3>
<p>由于新浪微博SDK还未更新ATS的支持，故目前需要对其进行配置，可根据所选平台裁剪以下代码：
右键info.plist用source code打开</p>
<pre><code>&lt;key&gt;NSAppTransportSecurity&lt;/key&gt;
&lt;dict&gt;
   &lt;key&gt;NSExceptionDomains&lt;/key&gt;
   &lt;dict&gt;
       &lt;!-- 集成新浪微博对应的HTTP白名单--&gt;
       &lt;key&gt;sina.com.cn&lt;/key&gt;
       &lt;dict&gt;
           &lt;key&gt;NSIncludesSubdomains&lt;/key&gt;
           &lt;true/&gt;
           &lt;key&gt;NSThirdPartyExceptionAllowsInsecureHTTPLoads&lt;/key&gt;
           &lt;true/&gt;
           &lt;key&gt;NSThirdPartyExceptionRequiresForwardSecrecy&lt;/key&gt;
           &lt;false/&gt;
       &lt;/dict&gt;
       &lt;key&gt;sinaimg.cn&lt;/key&gt;
       &lt;dict&gt;
           &lt;key&gt;NSIncludesSubdomains&lt;/key&gt;
           &lt;true/&gt;
           &lt;key&gt;NSThirdPartyExceptionAllowsInsecureHTTPLoads&lt;/key&gt;
           &lt;true/&gt;
           &lt;key&gt;NSThirdPartyExceptionRequiresForwardSecrecy&lt;/key&gt;
           &lt;false/&gt;
       &lt;/dict&gt;
       &lt;key&gt;sinajs.cn&lt;/key&gt;
       &lt;dict&gt;
           &lt;key&gt;NSIncludesSubdomains&lt;/key&gt;
           &lt;true/&gt;
           &lt;key&gt;NSThirdPartyExceptionAllowsInsecureHTTPLoads&lt;/key&gt;
           &lt;true/&gt;
           &lt;key&gt;NSThirdPartyExceptionRequiresForwardSecrecy&lt;/key&gt;
           &lt;false/&gt;
       &lt;/dict&gt;
       &lt;key&gt;sina.cn&lt;/key&gt;
       &lt;dict&gt;
           &lt;!-- 适配iOS10 --&gt;
           &lt;key&gt;NSExceptionMinimumTLSVersion&lt;/key&gt;
           &lt;string&gt;TLSv1.0&lt;/string&gt;
           &lt;key&gt;NSIncludesSubdomains&lt;/key&gt;
           &lt;true/&gt;
           &lt;key&gt;NSThirdPartyExceptionRequiresForwardSecrecy&lt;/key&gt;
           &lt;false/&gt;
       &lt;/dict&gt;
       &lt;key&gt;weibo.cn&lt;/key&gt;
       &lt;dict&gt;
           &lt;!-- 适配iOS10 --&gt;
           &lt;key&gt;NSExceptionMinimumTLSVersion&lt;/key&gt;
           &lt;string&gt;TLSv1.0&lt;/string&gt;
           &lt;key&gt;NSIncludesSubdomains&lt;/key&gt;
           &lt;true/&gt;
           &lt;key&gt;NSThirdPartyExceptionRequiresForwardSecrecy&lt;/key&gt;
           &lt;false/&gt;
       &lt;/dict&gt;
       &lt;key&gt;weibo.com&lt;/key&gt;
       &lt;dict&gt;
           &lt;!-- 适配iOS10 --&gt;
           &lt;key&gt;NSExceptionMinimumTLSVersion&lt;/key&gt;
           &lt;string&gt;TLSv1.0&lt;/string&gt;
           &lt;key&gt;NSIncludesSubdomains&lt;/key&gt;
           &lt;true/&gt;
           &lt;key&gt;NSThirdPartyExceptionAllowsInsecureHTTPLoads&lt;/key&gt;
           &lt;true/&gt;
           &lt;key&gt;NSThirdPartyExceptionRequiresForwardSecrecy&lt;/key&gt;
           &lt;false/&gt;
       &lt;/dict&gt;
       &lt;!-- 新浪微博--&gt;
   &lt;/dict&gt;
&lt;/dict&gt;
</code></pre>

<h3>新浪微博(完整版)登录回调方法要求</h3>
<p>未安装新浪微博客户端时会弹出Webview进行登录和分享，之后会回调至以下函数:</p>
<pre><code>- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation
</code></pre>

<blockquote>
<p>如果用户没有重载此函数的话，会导致微博（完整版）SDK通过Webview的回调而崩溃。
开发者需重载此方法接受系统回调。</p>
</blockquote>
<h3>分享LinkCard（网页、音乐、视频链接分享）</h3>
<p>进行网页链接分享是多数应用进行推广和分享的形式，包含了标题、描述和缩略图，不像微信和QQ平台分享后会显示一张Card形式的消息，点开后会打开连接。微博的形式略有不同。</p>
<ul>
<li>
<p>什么是LinkCard
在微博消息流内,分享一条链接,该链接将解析为包含一个对象数据的特殊短链,且该对象数据可以在微博消息流内显示并交互,这种形态就是微博消息流LinkCard解析。 参考<a href="http://open.weibo.com/wiki/%E7%A7%BB%E5%8A%A8%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%8E%A5%E5%85%A5">微博-移动客户端接入</a></p>
</li>
<li>
<p>分享网页类型数据之后不显示缩略图 是什么原因
这属于微博的移动应用商务合作,移动SDK中的LinkCard和附件栏集成分享权限需要合作申请，对接请联系微博商务：yinle@staff.weibo.com</p>
</li>
</ul>
<h3>ADSupport及IDFA的说明</h3>
<p>如果开发者希望集成ADSupport.framework，在进行ipa提交store时候勾选用于跟踪用户广告效果的选项即可。</p>
<p>如果开发者希望不集成ADSupport.framework，即获取IDFA，可直接删去ADSupport.framework。不集成ADSupport.framework不会影响微博的登录和分享功能。</p>
<h2>QQ/QZone</h2>
<h3>初始化appId说明</h3>
<p>U-Share SDK为了兼容大部分平台命名，统一用appKey和appSecret进行参数设置，而QQ平台仅需将appID作为U-Share的appKey参数传进即可。
例如Demo中的示例代码：</p>
<pre><code>    /* 设置QQ互联appKey */
    NSString *qqAppID = @&quot;100424468&quot;;
    [[UMSocialManager defaultManager] setPlaform:UMSocialPlatformType_QQ appKey:qqAppID  appSecret:nil redirectURL:nil];
</code></pre>

<blockquote>
<p>若不进行appId初始化可能会报错：App is not registed。</p>
</blockquote>
<h3>分享网页类型说明</h3>
<p>如果分享的url中含有中文字符，需要将中文部分进行url转码后可正常分享。
如：https://www.umeng.com/U-Share分享
需要将「分享」二字进行url转码放在链接中再进行分享，如下：
https://www.umeng.com/U-Share%E5%88%86%E4%BA%AB</p>
<h2>人人</h2>
<h3>配置ATS以支持访问HTTP请求</h3>
<p>人人平台的服务器目前未支持HTTPS，需要添加相应配置，右键info.plist用source code打开，找到NSAppTransportSecurity并添加人人的白名单</p>
<pre><code>&lt;key&gt;NSAppTransportSecurity&lt;/key&gt;
&lt;dict&gt;
   &lt;key&gt;NSExceptionDomains&lt;/key&gt;
   &lt;dict&gt;
       &lt;!-- 集成人人授权对应的HTTP白名单--&gt;
       &lt;key&gt;renren.com&lt;/key&gt;
       &lt;dict&gt;
           &lt;key&gt;NSIncludesSubdomains&lt;/key&gt;
           &lt;true/&gt;
           &lt;key&gt;NSThirdPartyExceptionAllowsInsecureHTTPLoads&lt;/key&gt;
           &lt;true/&gt;
           &lt;key&gt;NSThirdPartyExceptionRequiresForwardSecrecy&lt;/key&gt;
           &lt;false/&gt;
       &lt;/dict&gt;
       &lt;!-- 人人授权--&gt;
   &lt;/dict&gt;
&lt;/dict&gt;
</code></pre>

<h2>Facebook/Messenger</h2>
<h3>配置info.plist</h3>
<ul>
<li>除配置URL Scheme外，Facebook SDK还要求在info.plist文件中加入两项参数，分别是：<ul>
<li>FacebookAppID</li>
<li>FacebookDisplayName</li>
</ul>
</li>
<li>以上参数值是在Facebook开发者平台<a href="https://developers.facebook.com/apps">https://developers.facebook.com/apps</a> 设置并获取对应的<code>AppID</code>和<code>Display Name</code></li>
<li>如U-Share Demo的测试AppID为506027402887373， Display Name为UmengShare。则加入两项参数为<ul>
<li>FacebookAppID : 506027402887373</li>
<li>FacebookDisplayName : UmengShare</li>
</ul>
</li>
</ul>
<h3>登录授权流程说明</h3>
<ul>
<li>登录（6.2版本以前的登录）</li>
</ul>
<p>Facebook SDK授权流程：
    1. 弹出Safari网页，显示登录页面
    2. 页面中可选通过Facebook APP授权，或输入账号密码授权
    3. 通过Facebook APP授权可通过SSO跳转到Facebook APP面输账号进行登录
    4. 通过账号密码形式进行登录后下次授权会默认在Safari中登录</p>
<ul>
<li>登出（取消授权）（6.2版本以前的登录） </li>
</ul>
<p>通过U-Share SDK执行取消Facebook平台授权仅移除APP内登录数据，若希望下次切换其他账号，需要在Safari中登录www.facebook.com，在页面内进行登出操作。</p>
<ul>
<li>登录（6.3版本授权）</li>
</ul>
<p>Facebook SDK授权流程：
    由于新版Facebook SDK的更新，登录流程和之前的流程有很大不同，
    facebook可以通过配置在facebook官网配置登陆的流程（sso或web）,每次启动的时候会获得facebook的serverConfig来决定是否SSO登陆或者web登陆。
    1.  如果成功获得serverConfig的配置参数，就会根据配置参数来决定选择是否sso或web登陆。
    2. 如果未成功获得serverConfig的配置参数，就会直接做web登陆（此流程同 <strong>登录（6.2版本以前的登录）</strong>）</p>
<p><strong>备注：不管是哪个版本，授权都需要申请“publish_actions”权限，以便使用facebook的rest api</strong></p>
<ul>
<li>登出（取消授权）（6.3版本授权） </li>
</ul>
<p>通过U-Share SDK执行取消Facebook平台授权仅移除APP内登录数据，若希望下次切换其他账号，需要在Safari中登录www.facebook.com，在页面内进行登出操作。</p>
<h3>Facebook分享行为的注意事项</h3>
<p>新版的Facebook为兼容老版本的分享包含为restAPI分享和Dialog的(所见即所得)分享形式。</p>
<ol>
<li>
<p>restAPI分享
    主要分享的是带文本的类型，比如：纯文本分享，图文分享等
    其分享行为是调用RestAPI,没有界面跳转，只有回调结果，但是需要先授权才能分享。</p>
</li>
<li>
<p>Dialog的(所见即所得)分享
    主要的分享是不带文本的分享，比如：图片分享，webpage分享等。
    其分享行为是弹出对话框让用户预览用户要分享的内容，方便用户查看，不需要授权也能分享。</p>
</li>
<li>分享后返回错误506
   发送的内容重复，修改为其他内容后可以成功分享。</li>
</ol>
<h3>Messenger</h3>
<p>Facebook Messenger仅可进行分享，支持图片、网页、视频和音乐分享类型。</p>
<h3>Facebook SDK集成注意事项</h3>
<p><strong>6.3版本Facebook的SDK只能在iOS8.0上使用</strong></p>
<h2>Twitter</h2>
<h3>加入Twitter bundle文件</h3>
<p>将附带Twitter SDK的U-Share SDK加入工程后，还需导入Twitter的资源文件
1. 在Xcode项目中，右键U-Share SDK下的Twitter目录
2. 找到TwitterKitResources.bundle并导入，其路径为</p>
<pre><code>Twitter/TwitterKit.framework/Resources/TwitterKitResources.bundle
</code></pre>

<h3>登录授权流程说明</h3>
<ul>
<li>登录
Twitter SDK授权流程：<ol>
<li>检测iOS系统内以及安装的Twitter APP有无登录Twitter账号</li>
<li>已在系统及APP登录则直接使用登录账号</li>
<li>未在系统登录则弹出授权页面进行登录，登录成功后同时同步账号到系统Twitter账号</li>
</ol>
</li>
<li>登出（取消授权） <br />
通过U-Share SDK执行取消Twitter平台授权仅移除APP内登录数据，若希望下次切换其他账号，需要在系统或Twitter APP内进行登出操作</li>
</ul>
<h3>Twitter错误码说明</h3>
<p>官方错误码：https://dev.twitter.com/overview/api/response-codes</p>
<ul>
<li>错误码：401</li>
</ul>
<p>1、检查在U-Share中设置的Twitter appkey和appsecret是否和Twitter开发者后台相匹配。
2、检查Twitter开发者后台中Details选项里的Access level，确保为<code>Read and write</code>权限。</p>
<ul>
<li>错误码：187
1、若在返回错误中包含 "code = 187, duplicated xxx"内容，说明重复发送相同的内容，需过段时间才可发送，或修改发送内容即可。</li>
</ul>
<h2>Kakao</h2>
<h3>配置info.plist</h3>
<ul>
<li>Kakao SDK要求在info.plist文件中加入两项参数分别是：<ul>
<li>KAKAO_APP_KEY</li>
<li>KAKAO_SECURE_MODE</li>
</ul>
</li>
<li>以上参数值在<a href="https://developers.kakao.com/apps">https://developers.kakao.com/apps</a>Kakao开发者平台设置的获取的<code>AppKey</code></li>
<li>如U-Share Demo的测试AppKey为6d5e4ca98ba3b944020c2c90953318e9。则加入两项参数为<ul>
<li>KAKAO_APP_KEY : 6d5e4ca98ba3b944020c2c90953318e9</li>
<li>KAKAO_SECURE_MODE : NO （注：布尔类型）</li>
</ul>
</li>
</ul>
<h3>配置URL Scheme</h3>
<ul>
<li>URL Scheme格式 <br />
    kakao + <code>Kakao AppKey</code>    </li>
<li>
<p>URL Scheme举例
    如Kakao AppKey为：6d5e4ca98ba3b944020c2c90953318e9
    实际参数：kakao6d5e4ca98ba3b944020c2c90953318e9</p>
</li>
<li>
<p>依照图示添加URL Types</p>
</li>
</ul>
<p><img src="http://dev.umeng.com/system/images/W1siZiIsIjIwMTYvMDkvMjkvMTdfMDNfMzZfNjE5X1FRMjAxNjA5MjlfMV8yeC5wbmciXV0/QQ20160929-1@2x.png" width="710" height="325"> </p>
<ul>
<li>依照图中输入框说明填入参数，如以上示例Facebook ID<ul>
<li>URL Types</li>
</ul>
</li>
</ul>
<pre><code>    URL Schemes: kakao6d5e4ca98ba3b944020c2c90953318e9
</code></pre>

<blockquote>
<p>请勿直接使用上述示例参数，多个App使用同样的URL Schemes参数会导致从第三方App跳转回原App时混乱。</p>
</blockquote>
<h3>配置跳转白名单</h3>
<p>进行登录时要跳转到Kakao应用，需要在info.plist中的<code>LSApplicationQueriesSchemes</code>添加以下代码</p>
<pre><code>        &lt;string&gt;kakao6d5e4ca98ba3b944020c2c90953318e9&lt;/string&gt;
        &lt;string&gt;kakaokompassauth&lt;/string&gt;
        &lt;string&gt;storykompassauth&lt;/string&gt;
        &lt;string&gt;kakaolink&lt;/string&gt;
        &lt;string&gt;kakaotalk-4.5.0&lt;/string&gt;
        &lt;string&gt;kakaostory-2.9.0&lt;/string
</code></pre>

<p>注：上述<code>kakao6d5e4ca98ba3b944020c2c90953318e9</code>值需要根据以上<code>配置URL Scheme</code>一样改成开发者获取的AppKey，加上前缀<code>kakao</code>。</p>
<h1>分享到第三方平台</h1>
<h2>第三方平台支持的分享类型总览</h2>
<table class="table table-bordered table-striped table-condensed">

<tr>
<td>平台</td>
<td>文本</td>
<td>图片</td>
<td>图文</td>
<td>Web链接</td>
<td>视频链接</td>
<td>音乐链接</td>
<td>其他</td>
</tr>

<tr>
<td>微信好友</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>微信小程序、gif表情及文件</td>
</tr>
<tr>
<td>微信朋友圈</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>-</td>
</tr>
<tr>
<td>微信收藏</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>文件</td>
</tr>
<tr>
<td>新浪微博</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>-</td>
</tr>
<tr>
<td>QQ</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>-</td>
</tr>
<tr>
<td>QQ空间</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>-</td>
</tr>
<tr>
<td>支付宝</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>-</td>
</tr>
<tr>
<td>钉钉</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>√</td>
<td>×</td>
<td>×</td>
<td>-</td>
</tr>
<tr>
<td>点点虫</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>-</td>
</tr>
<tr>
<td>易信</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>-</td>
</tr>
<tr>
<td>豆瓣</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>-</td>
</tr>
<tr>
<td>人人</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>-</td>
</tr>
<tr>
<td>腾讯微博</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>-</td>
</tr>
<tr>
<td>有道云笔记</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>文件</td>
</tr>
<tr>
<td>印象笔记</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>文件</td>
</tr>
<tr>
<td>有道云笔记</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>-</td>
</tr>
<tr>
<td>Linkedin(领英)</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>图片链接必须为网络链接，不支持本地图片</td>
</tr>
<tr>
<td>Facebook</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>-</td>
</tr>
<tr>
<td>FaceBookMessenger</td>
<td>×</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>-</td>
</tr>
<tr>
<td>Twitter</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>-</td>
</tr>
<tr>
<td>Instagram</td>
<td>×</td>
<td>√</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>-</td>
</tr>
<tr>
<td>Kakao</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>-</td>
</tr>
<tr>
<td>Line</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>-</td>
</tr>
<tr>
<td>Tumblr</td>
<td>√</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>-</td>
</tr>
<tr>
<td>Pinterest</td>
<td>×</td>
<td>√</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>图片必须为网络链接</td>
</tr>
<tr>
<td>WhatsApp</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>-</td>
</tr>
<tr>
<td>Flickr</td>
<td>×</td>
<td>√</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>-</td>
</tr>
<tr>
<td>Google+</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>-</td>
</tr>
<tr>
<td>Pocket</td>
<td>×</td>
<td>√</td>
<td>×</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>图片为网络链接</td>
</tr>
<tr>
<td>VKontakte</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>-</td>
</tr>
<tr>
<td>DropBox</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>文件</td>
</tr>
<tr>
<td>短信</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>-</td>
</tr>
<tr>
<td>邮件</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>-</td>
</tr>
</table>

<h2>分享文本</h2>
<pre><code>- (void)shareTextToPlatformType:(UMSocialPlatformType)platformType
{
    //创建分享消息对象
    UMSocialMessageObject *messageObject = [UMSocialMessageObject messageObject];
    //设置文本
    messageObject.text = @&quot;社会化组件UShare将各大社交平台接入您的应用，快速武装App。&quot;;

    //调用分享接口
    [[UMSocialManager defaultManager] shareToPlatform:platformType messageObject:messageObject currentViewController:self completion:^(id data, NSError *error) {
        if (error) {
            NSLog(@&quot;************Share fail with error %@*********&quot;,error);
        }else{
            NSLog(@&quot;response data is %@&quot;,data);
        }
    }];
}
</code></pre>

<h2>分享图片</h2>
<pre><code>- (void)shareImageToPlatformType:(UMSocialPlatformType)platformType
{
    //创建分享消息对象
    UMSocialMessageObject *messageObject = [UMSocialMessageObject messageObject];

    //创建图片内容对象
    UMShareImageObject *shareObject = [[UMShareImageObject alloc] init];
    //如果有缩略图，则设置缩略图
    shareObject.thumbImage = [UIImage imageNamed:@&quot;icon&quot;];
    [shareObject setShareImage:@&quot;https://mobile.umeng.com/images/pic/home/social/img-1.png&quot;];

    //分享消息对象设置分享内容对象
    messageObject.shareObject = shareObject;

    //调用分享接口
    [[UMSocialManager defaultManager] shareToPlatform:platformType messageObject:messageObject currentViewController:self completion:^(id data, NSError *error) {
        if (error) {
            NSLog(@&quot;************Share fail with error %@*********&quot;,error);
        }else{
            NSLog(@&quot;response data is %@&quot;,data);
        }
    }];
}
</code></pre>

<h2>分享图文（新浪支持，微信/QQ仅支持图或文本分享）</h2>
<pre><code>- (void)shareImageAndTextToPlatformType:(UMSocialPlatformType)platformType
{
    //创建分享消息对象
    UMSocialMessageObject *messageObject = [UMSocialMessageObject messageObject];

    //设置文本
    messageObject.text = @&quot;社会化组件UShare将各大社交平台接入您的应用，快速武装App。&quot;;

    //创建图片内容对象
    UMShareImageObject *shareObject = [[UMShareImageObject alloc] init];
    //如果有缩略图，则设置缩略图
    shareObject.thumbImage = [UIImage imageNamed:@&quot;icon&quot;];
    [shareObject setShareImage:@&quot;https://www.umeng.com/img/index/demo/1104.4b2f7dfe614bea70eea4c6071c72d7f5.jpg&quot;];

    //分享消息对象设置分享内容对象
    messageObject.shareObject = shareObject;

    //调用分享接口
    [[UMSocialManager defaultManager] shareToPlatform:platformType messageObject:messageObject currentViewController:self completion:^(id data, NSError *error) {
        if (error) {
            NSLog(@&quot;************Share fail with error %@*********&quot;,error);
        }else{
            NSLog(@&quot;response data is %@&quot;,data);
        }
    }];
}
</code></pre>

<h2>分享网页</h2>
<pre><code>- (void)shareWebPageToPlatformType:(UMSocialPlatformType)platformType
{
    //创建分享消息对象
    UMSocialMessageObject *messageObject = [UMSocialMessageObject messageObject];

    //创建网页内容对象
    UMShareWebpageObject *shareObject = [UMShareWebpageObject shareObjectWithTitle:@&quot;分享标题&quot; descr:@&quot;分享内容描述&quot; thumImage:[UIImage imageNamed:@&quot;icon&quot;]];
    //设置网页地址
    shareObject.webpageUrl =@&quot;http://mobile.umeng.com/social&quot;;

    //分享消息对象设置分享内容对象
    messageObject.shareObject = shareObject;

    //调用分享接口
    [[UMSocialManager defaultManager] shareToPlatform:platformType messageObject:messageObject currentViewController:self completion:^(id data, NSError *error) {
        if (error) {
            NSLog(@&quot;************Share fail with error %@*********&quot;,error);
        }else{
            NSLog(@&quot;response data is %@&quot;,data);
        }
    }];
}
</code></pre>

<h2>分享音乐</h2>
<pre><code>- (void)shareMusicToPlatformType:(UMSocialPlatformType)platformType
{
    //创建分享消息对象
    UMSocialMessageObject *messageObject = [UMSocialMessageObject messageObject];

    //创建音乐内容对象
    UMShareMusicObject *shareObject = [UMShareMusicObject shareObjectWithTitle:@&quot;分享标题&quot; descr:@&quot;分享内容描述&quot; thumImage:[UIImage imageNamed:@&quot;icon&quot;]];
    //设置音乐网页播放地址
    shareObject.musicUrl = @&quot;http://c.y.qq.com/v8/playsong.html?songid=108782194&amp;source=yqq#wechat_redirect&quot;;
    //            shareObject.musicDataUrl = @&quot;这里设置音乐数据流地址（如果有的话，而且也要看所分享的平台支不支持）&quot;;
    //分享消息对象设置分享内容对象
    messageObject.shareObject = shareObject;

    //调用分享接口
    [[UMSocialManager defaultManager] shareToPlatform:platformType messageObject:messageObject currentViewController:self completion:^(id data, NSError *error) {
        if (error) {
            NSLog(@&quot;************Share fail with error %@*********&quot;,error);
        }else{
            NSLog(@&quot;response data is %@&quot;,data);
        }
    }];
}
</code></pre>

<h2>分享视频</h2>
<pre><code>- (void)shareVedioToPlatformType:(UMSocialPlatformType)platformType
{
    //创建分享消息对象
    UMSocialMessageObject *messageObject = [UMSocialMessageObject messageObject];

    //创建视频内容对象
    UMShareVideoObject *shareObject = [UMShareVideoObject shareObjectWithTitle:@&quot;分享标题&quot; descr:@&quot;分享内容描述&quot; thumImage:[UIImage imageNamed:@&quot;icon&quot;]];
    //设置视频网页播放地址
    shareObject.videoUrl = @&quot;http://video.sina.com.cn/p/sports/cba/v/2013-10-22/144463050817.html&quot;;
    //            shareObject.videoStreamUrl = @&quot;这里设置视频数据流地址（如果有的话，而且也要看所分享的平台支不支持）&quot;;

    //分享消息对象设置分享内容对象
    messageObject.shareObject = shareObject;

    //调用分享接口
    [[UMSocialManager defaultManager] shareToPlatform:platformType messageObject:messageObject currentViewController:self completion:^(id data, NSError *error) {
        if (error) {
            NSLog(@&quot;************Share fail with error %@*********&quot;,error);
        }else{
            NSLog(@&quot;response data is %@&quot;,data);
        }
    }];
}
</code></pre>

<h2>分享微信表情</h2>
<pre><code>- (void)shareEmoticonToPlatformType:(UMSocialPlatformType)platformType
{
    UMSocialMessageObject *messageObject = [UMSocialMessageObject messageObject];

    UMShareEmotionObject *shareObject = [UMShareEmotionObject shareObjectWithTitle:UMS_Title descr:UMS_Text thumImage:nil];

    NSString *filePath = [[NSBundle mainBundle] pathForResource:@&quot;gifFile&quot;
                                                         ofType:@&quot;gif&quot;];
    NSData *emoticonData = [NSData dataWithContentsOfFile:filePath];
    shareObject.emotionData = emoticonData;
    messageObject.shareObject = shareObject;

    //调用分享接口
    [[UMSocialManager defaultManager] shareToPlatform:platformType messageObject:messageObject currentViewController:self completion:^(id data, NSError *error) {
        if (error) {
            NSLog(@&quot;************Share fail with error %@*********&quot;,error);
        }else{
            if ([data isKindOfClass:[UMSocialShareResponse class]]) {
                UMSocialShareResponse *resp = data;
                //分享结果消息
                NSLog(@&quot;response message is %@&quot;,resp.message);

            }else{
                NSLog(@&quot;response data is %@&quot;,data);
            }
        }
    }];
}
</code></pre>

<h2>分享微信小程序</h2>
<pre><code>- (void)shareMiniProgramToPlatformType:(UMSocialPlatformType)platformType
{
    //创建分享消息对象
    UMSocialMessageObject *messageObject = [UMSocialMessageObject messageObject];

    UMShareMiniProgramObject *shareObject = [UMShareMiniProgramObject shareObjectWithTitle:@&quot;小程序标题&quot; descr:@&quot;小程序内容描述&quot; thumImage:[UIImage imageNamed:@&quot;icon&quot;]];
    shareObject.webpageUrl = @&quot;兼容微信低版本网页地址&quot;;
    shareObject.userName = @&quot;小程序username，如 gh_3ac2059ac66f&quot;;
    shareObject.path = @&quot;小程序页面路径，如 pages/page10007/page10007&quot;;
    messageObject.shareObject = shareObject;

    //调用分享接口
    [[UMSocialManager defaultManager] shareToPlatform:platformType messageObject:messageObject currentViewController:self completion:^(id data, NSError *error) {
        if (error) {
            UMSocialLogInfo(@&quot;************Share fail with error %@*********&quot;,error);
        }else{
            if ([data isKindOfClass:[UMSocialShareResponse class]]) {
                UMSocialShareResponse *resp = data;
                //分享结果消息
                UMSocialLogInfo(@&quot;response message is %@&quot;,resp.message);
                //第三方原始返回的数据
                UMSocialLogInfo(@&quot;response originalResponse data is %@&quot;,resp.originalResponse);

            }else{
                UMSocialLogInfo(@&quot;response data is %@&quot;,data);
            }
        }
        [self alertWithError:error];
    }];
}
</code></pre>

<h2>示例</h2>
<ul>
<li>分享文本到微信：</li>
</ul>
<pre><code>#import &lt;UMSocialCore/UMSocialCore.h&gt;

- (void)shareTextToWechat
{
    NSString *text = @&quot;社会化组件U-Share将各大社交平台接入您的应用，快速武装App。&quot;;

    UMSocialMessageObject *messageObject = [UMSocialMessageObject messageObject];

    messageObject.text = text;

    [[UMSocialManager defaultManager] shareToPlatform:UMSocialPlatformType_WechatSession messageObject:messageObject currentViewController:self completion:^(id data, NSError *error) {
        NSString *message = nil;
        if (!error) {
            message = [NSString stringWithFormat:@&quot;分享成功&quot;];
        } else {
            message = [NSString stringWithFormat:@&quot;失败原因Code: %d\n&quot;,(int)error.code];

        }
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@&quot;share&quot;
                                                        message:message
                                                       delegate:nil
                                              cancelButtonTitle:NSLocalizedString(@&quot;确定&quot;, nil)
                                              otherButtonTitles:nil];
        [alert show];
    }];
}
</code></pre>

<ul>
<li>调用分享面板分享文本到所选平台</li>
</ul>
<pre><code>#import &lt;UShareUI/UShareUI.h&gt;
#import &lt;UMSocialCore/UMSocialCore.h&gt;

- (void)shareWithUI {

    //显示分享面板
    [UMSocialUIManager showShareMenuViewInWindowWithPlatformSelectionBlock:^(UMSocialPlatformType platformType, NSDictionary *userInfo) {
        // 根据获取的platformType确定所选平台进行下一步操作

        //创建分享消息对象
        UMSocialMessageObject *messageObject = [UMSocialMessageObject messageObject];
        //设置文本
        messageObject.text = @&quot;社会化组件UShare将各大社交平台接入您的应用，快速武装App。&quot;;

        //调用分享接口
        [[UMSocialManager defaultManager] shareToPlatform:platformType messageObject:messageObject currentViewController:self completion:^(id data, NSError *error) {
            if (error) {
                NSLog(@&quot;************Share fail with error %@*********&quot;,error);
            }else{
                NSLog(@&quot;response data is %@&quot;,data);
            }
        }];
    }];
}

</code></pre>

<h1>分享面板UI</h1>
<h2>分享面板注意事项</h2>
<p>由于
1. 创建Xcode项目会默认添加<code>Main.storyboard</code>作为<code>Main Interface</code>(General - Deployment Info)，也就是项目的主Window。
2. 如果没使用Main.storyboard而又另外在AppDelegate中创建了UIWindow对象，如</p>
<pre><code>self.window = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds]
</code></pre>

<p>如果项目中同时出现<code>Main Interface</code>以及代码创建<code>UIWindow</code>会导致分享面板无法正常弹出，解决方法是移除其一即可。</p>
<h2>调用分享面板</h2>
<pre><code>#import &lt;UShareUI/UShareUI.h&gt;
//显示分享面板
[UMSocialUIManager showShareMenuViewInWindowWithPlatformSelectionBlock:^(UMSocialPlatformType platformType, NSDictionary *userInfo) {
    // 根据获取的platformType确定所选平台进行下一步操作
}];
</code></pre>

<ul>
<li>使用presentViewController或其他无法显示分享面板的情况<br />
参考<strong>设置分享面板代理</strong>一节修改父窗口回调为self.view或其他指定视图。</li>
</ul>
<h2>设置分享面板代理</h2>
<ul>
<li>代理协议如下：</li>
</ul>
<pre><code>@protocol UMSocialShareMenuViewDelegate &lt;NSObject&gt;
@optional
/**
 *  分享面板显示的回调
 */
- (void)UMSocialShareMenuViewDidAppear;

/**
 *  分享面板的消失的回调
 */
- (void)UMSocialShareMenuViewDidDisappear;

/**
 *  返回分享面板的父窗口,用于嵌入在父窗口上显示
 *
 *  @param defaultSuperView 默认加载的父窗口
 *
 *  @return 返回实际的父窗口
 *  @note 返回的view应该是全屏的view，方便分享面板来布局。
 *  @note 如果用户要替换成自己的ParentView，需要保证该view能覆盖到navigationbar和statusbar
 *  @note 当前分享面板已经是在window上,如果需要切换就重写此协议，如果不需要改变父窗口则不需要重写此协议
 */
- (UIView*)UMSocialParentView:(UIView*)defaultSuperView;
@end
</code></pre>

<ul>
<li>可以更改分享面板的父窗口（示例）</li>
</ul>
<pre><code>/* 上下文 */
// self继承自UIViewController
[UMSocialUIManager setShareMenuViewDelegate:self];
/* 上下文 */

//不需要改变父窗口则不需要重写此协议
- (UIView*)UMSocialParentView:(UIView*)defaultSuperView
{
    return defaultSuperView;
}

</code></pre>

<h2>自定义分享面板预定义平台（顺序）</h2>
<ul>
<li>Objective-C</li>
</ul>
<pre><code>#import &lt;UShareUI/UShareUI.h&gt;
 [UMSocialUIManager setPreDefinePlatforms:@[@(UMSocialPlatformType_Sina),@(UMSocialPlatformType_QQ),@(UMSocialPlatformType_WechatSession)]];
 [UMSocialUIManager showShareMenuViewInWindowWithPlatformSelectionBlock:^(UMSocialPlatformType platformType, NSDictionary *userInfo) {
    // 根据获取的platformType确定所选平台进行下一步操作
}];
</code></pre>

<ul>
<li>swift</li>
</ul>
<pre><code>//调用setPreDefinePlatforms的示例
UMSocialUIManager.setPreDefinePlatforms([NSNumber(integerLiteral:UMSocialPlatformType.wechatSession.rawValue),NSNumber(integerLiteral:UMSocialPlatformType.QQ.rawValue),NSNumber(integerLiteral:UMSocialPlatformType.sina.rawValue)])
</code></pre>

<ul>
<li><strong>此函数需要在showShareMenuViewInWindowWithPlatformSelectionBlock之前调用</strong></li>
<li><strong>传入的平台必须是合法并且是core模块已经检测到的已经存在的平台，不然会被过滤掉(此条款是上线appStore审核的条件，开发者必须注意)</strong></li>
</ul>
<h2>自定义分享面板样式</h2>
<p>用户可以根据需求来自定义分享面板，分享面板分有四个主体控件：</p>
<ul>
<li><strong>UMSocialShareTitleView title控件</strong></li>
<li><strong>UMSocialSharePageScrollView 分页控件</strong></li>
<li><strong>UMSocialSharePageControl PageControl控件</strong></li>
<li><strong>UMSocialShareCancelControl CancelControl控件</strong></li>
</ul>
<p>每个控件对应相应的配置类，方便用户通过配置参数来调整控件的外观。
每个控件的配置类如下:</p>
<pre><code>UMSocialShareTitleView  --&gt; UMSocialShareTitleViewConfig
UMSocialSharePageScrollView --&gt; UMSocialSharePageScrollViewConfig
UMSocialSharePageControl --&gt; UMSocialSharePageControlConfig
UMSocialShareCancelControl --&gt; UMSocialShareCancelControlConfig
</code></pre>

<p>UMSocialShareTitleViewConfig 的参数如下:</p>
<pre><code>BOOL isShow;//是否显示
NSString* shareTitleViewTitleString;//标题的文字
UIFont* shareTitleViewFont;//字体
UIColor* shareTitleViewTitleColor;//文字颜色
UIColor* shareTitleViewBackgroundColor;//背景颜色
CGFloat shareTitleViewPaddingTop;//title的内边距top
CGFloat shareTitleViewPaddingBottom;//title的内边距Bottom
</code></pre>

<p>UMSocialSharePageScrollViewConfig 的参数如下:</p>
<pre><code>CGFloat shareScrollViewPageMaxItemWidth; //每页Items的最大宽度
CGFloat shareScrollViewPageMaxItemHeight; //每页Items的最大高度
UMSocialPlatformItemViewBackgroudType shareScrollViewPageItemStyleType;//每个Item的背景类型
CGFloat shareScrollViewPageMaxRowCountForPortraitAndBottom; //每页显示最大的行(在底部显示手机处于肖像模式)
CGFloat shareScrollViewPageMaxColumnCountForPortraitAndBottom; //每页显示最大的列(在底部显示手机处于肖像模式)
....
</code></pre>

<p>UMSocialSharePageControlConfig 的参数如下:</p>
<pre><code>BOOL isShow;//是否显示
UIColor*  sharePageControlPageIndicatorTintColor;//指示器颜色
UIColor*  sharePageControlCurrentPageIndicatorTintColor;//当前的页的颜色
BOOL      sharePageControlHidesForSinglePage;//为一页是会隐藏
UIColor*  sharePageControlBackgroundColor;//背景色
</code></pre>

<p>UMSocialShareCancelControlConfig的参数如下:</p>
<pre><code>BOOL isShow;//是否显示
NSString* shareCancelControlText;//相对父view的左边距
UIColor* shareCancelControlTextColor;//文字颜色
UIFont* shareCancelControlTextFont;//文字字体
UIColor* shareCancelControlBackgroundColor;//背景颜色;
</code></pre>

<p>示例代码如下：
要修改当前分享面板为:无titleview,面板显示再中间，肖像模式下的2行3列，风景模式2行6列，没有取消控件。</p>
<pre><code>
    //配置上面需求的参数
    [UMSocialShareUIConfig shareInstance].shareTitleViewConfig.isShow = NO;
    [UMSocialShareUIConfig shareInstance].sharePageGroupViewConfig.sharePageGroupViewPostionType = UMSocialSharePageGroupViewPositionType_Middle;
    [UMSocialShareUIConfig shareInstance].sharePageScrollViewConfig.shareScrollViewPageMaxRowCountForPortraitAndMid = 2;
    [UMSocialShareUIConfig shareInstance].sharePageScrollViewConfig.shareScrollViewPageMaxColumnCountForPortraitAndMid = 3;
    [UMSocialShareUIConfig shareInstance].sharePageScrollViewConfig.shareScrollViewPageMaxRowCountForLandscapeAndMid = 2;
    [UMSocialShareUIConfig shareInstance].sharePageScrollViewConfig.shareScrollViewPageMaxColumnCountForLandscapeAndMid = 6;
    [UMSocialShareUIConfig shareInstance].shareCancelControlConfig.isShow = NO;

    //调用分享面板
     [UMSocialUIManager showShareMenuViewInWindowWithPlatformSelectionBlock:^(UMSocialPlatformType platformType, NSDictionary *userInfo) {
    // 根据获取的platformType确定所选平台进行下一步操作
}];
</code></pre>

<p>示例代码：</p>
<p>要修改当前分享面板为:分享面板的滑动的区域的背景色为红色，每页的背景色为黄色，去掉毛玻璃效果。</p>
<pre><code>    //配置上面需求的参数
        //shareScrollView背景色为红色
    [UMSocialShareUIConfig shareInstance].sharePageScrollViewConfig.shareScrollViewBackgroundColor = [UIColor redColor];
    //每页的背景颜色为黄色
    [UMSocialShareUIConfig shareInstance].sharePageScrollViewConfig.shareScrollViewPageBGColor = [UIColor yellowColor];
    //去掉毛玻璃效果
    [UMSocialShareUIConfig shareInstance].shareContainerConfig.isShareContainerHaveGradient = NO;
    //调用分享面板
     [UMSocialUIManager showShareMenuViewInWindowWithPlatformSelectionBlock:^(UMSocialPlatformType platformType, NSDictionary *userInfo) {
    // 根据获取的platformType确定所选平台进行下一步操作
}];
</code></pre>

<p><strong>分享面板已适配iOS和iPad，用户可以在此基础上微调一些参数来定制特有风格的分享面板。</strong></p>
<p><strong>每个对应的控件都可以独立设置，并且用户可自定义不同风格的控件外观。</strong></p>
<h2>自定义分享面板中的icon与事件</h2>
<p>分享面板可支持加入其他功能的图标，可处理自定义逻辑。</p>
<p>如在分享面板后面加一个“copy”功能。（注意每个在分享面板上显示的icon对应一个平台以UMSocialPlatformType类型作为标记）
假定“copy”功能需要设置一个UMSocialPlatformType类型为:UMSocialPlatformType_UserDefine_Begin+2</p>
<p>代码如下：</p>
<pre><code>    //加入copy的操作
    //@see http://dev.umeng.com/social/ios/进阶文档#6

    [UMSocialUIManager addCustomPlatformWithoutFilted:UMSocialPlatformType_UserDefine_Begin+2
                                     withPlatformIcon:[UIImage imageNamed:@&quot;auth_icon&quot;]
                                     withPlatformName:@&quot;copy&quot;];

    [UMSocialShareUIConfig shareInstance].sharePageGroupViewConfig.sharePageGroupViewPostionType = UMSocialSharePageGroupViewPositionType_Bottom;
    [UMSocialShareUIConfig shareInstance].sharePageScrollViewConfig.shareScrollViewPageItemStyleType = UMSocialPlatformItemViewBackgroudType_None;
    [UMSocialUIManager showShareMenuViewInWindowWithPlatformSelectionBlock:^(UMSocialPlatformType platformType, NSDictionary *userInfo) {
        //在回调里面获得点击的
        if (platformType == UMSocialPlatformType_UserDefine_Begin+2) {
            NSLog(@&quot;do your operation for copy&quot;);
        }
        else{
            [self runShareWithType:platformType];
        }
    }];

</code></pre>

<p><strong>用户设置图标时，需要和保持预定于的图标大小一样，以保持样式统一</strong></p>
<h1>自定义平台</h1>
<h2>自定义的平台类型的选取</h2>
<p>U-Share SDK已经为用户提供了主流的预定义平台，对这些平台已经做了优化和封装，比如：新浪，微信，QQ等。</p>
<p>详细的平台类型可以查看<strong>UMSocialPlatformType</strong>的枚举类型，方便用户直接导入后使用。</p>
<p><strong>用户自定义平台类型取值范围在UMSocialPlatformType_UserDefine_Begin到UMSocialPlatformType_UserDefine_End之间，不包括边界。</strong></p>
<pre><code>例如：

用户自定义平台的取值为: UMSocialPlatformType_UserDefine_Begin+1
</code></pre>

<h2>平台基类UMSocialHandler的功能介绍</h2>
<p>UMSocialHandler是实现每个平台的基础类，其功能如下:</p>
<ul>
<li>实现了最基础的平台协议 <strong>UMSocialPlatformProvider</strong> . </li>
</ul>
<pre><code>    请查看
    UMSocialPlatformProvider的协议内容   
</code></pre>

<ul>
<li>检查平台的前缀 </li>
</ul>
<pre><code>    查找URLScheme前缀的功能
    -(BOOL)searchForURLSchemeWithPrefix:(NSString *)prefix; 
</code></pre>

<ul>
<li>缓存对应的appkey,appSecret,redirectURL </li>
</ul>
<pre><code>
    -(void)setAppId:(NSString *)appID appSecret:(NSString *)secret url:(NSString *)url; 
</code></pre>

<ul>
<li>保存用户的授权信息。 </li>
</ul>
<pre><code>
    -(void)saveuid:(NSString *)uid openid:(NSString *)openid accesstoken:(NSString *)token refreshtoken:(NSString *)retoken expiration:(id )expiration;
</code></pre>

<ul>
<li>增加了平台的配置项用来限制分享内容(对超过的文本截断和超大图片的裁剪) </li>
</ul>
<pre><code>    请查看
    UMSocialHandlerConfig的class

</code></pre>

<h2>创建自定义平台的类</h2>
<p>用户需要继承UShareSDK的基类 <strong>UMSocialHandler</strong> ,该基类提供了基础框架功能，方便用户使用其功能。</p>
<p>用户自定义的类以UMSocialTemplateHandler为例子给用户示例：</p>
<p>用户继承UMSocialHandler类后，需要实现最基本的三个基础函数，</p>
<ul>
<li>单例的类函数，函数名如下:+ (UMSocialTemplateHandler *)defaultManager;</li>
<li>重载load方法。</li>
<li>当前平台对应的平台类型。</li>
</ul>
<p><strong><em>单例类的函数名必须要defaultManager，此规则必须注意</em></strong></p>
<p>代码如下:</p>
<pre><code>+(void)load
{
    [super load];
}

+(NSArray*) socialPlatformTypes
{
    return @[@(UMSocialPlatformType_UserDefine_Begin+1)];
}


+ (UMSocialTemplateHandler *)defaultManager
{
    static UMSocialTemplateHandler *instance = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&amp;onceToken, ^{
        if (!instance) {
            instance = [[self alloc] init];
        }
    });
    return instance;
}
</code></pre>

<p><strong>这些方法调用都是固定的，用户可以自行拷贝代码，替换成自己的类名(UMSocialTemplateHandler)和平台类型(UMSocialPlatformType_UserDefine_Begin+1)</strong></p>
<h2>实现自定义平台类的协议</h2>
<p>接下来需要实现 <strong>UMSocialPlatformProvider</strong> 定义的协议
在UMSocialTemplateHandler类中重写协议如下:</p>
<ul>
<li>初始化sdk的appKey，appSecret，redirectURL。</li>
</ul>
<pre><code>
     -(void)umSocial_setAppKey:(NSString*)appKey 
                withAppSecret:(NSString *)appSecret 
                withRedirectURL:(NSString *)redirectURL 
</code></pre>

<ul>
<li>删除缓存授权数据。</li>
</ul>
<pre><code>   -(void)umSocial_clearCacheData
</code></pre>

<ul>
<li>授权</li>
</ul>
<pre><code>    -(void)umSocial_AuthorizeWithUserInfo:(NSDictionary *)userInfo
                   withViewController:(UIViewController*)viewController
                withCompletionHandler:(UMSocialRequestCompletionHandler)completionHandler                
</code></pre>

<ul>
<li>取消授权</li>
</ul>
<pre><code>    -(void)umSocial_cancelAuthWithCompletionHandler:(UMSocialRequestCompletionHandler)completionHandler
</code></pre>

<ul>
<li>分享</li>
</ul>
<pre><code>    -(void)umSocial_ShareWithObject:(UMSocialMessageObject *)messageObject withCompletionHandler:(UMSocialRequestCompletionHandler)completionHandler
</code></pre>

<ul>
<li>获得用户信息</li>
</ul>
<pre><code>    -(void)umSocial_RequestForUserProfileWithCompletionHandler:(UMSocialRequestCompletionHandler)completionHandler
</code></pre>

<ul>
<li>获得从sso或者web端回调到本app的回调</li>
</ul>
<pre><code>    -(BOOL)umSocial_handleOpenURL:(NSURL *)url
</code></pre>

<ul>
<li>返回平台的版本</li>
</ul>
<pre><code>    -(NSString *)umSocial_PlatformSDKVersion
</code></pre>

<ul>
<li>当前平台app是否安装</li>
</ul>
<pre><code>    -(BOOL)umSocial_isInstall
</code></pre>

<ul>
<li>当前平台是否可以分享</li>
</ul>
<pre><code>    -(BOOL)umSocial_isSupport
</code></pre>

<ul>
<li>检查urlschema</li>
</ul>
<pre><code>    -(BOOL)checkUrlSchema
</code></pre>

<h2>自定义平台的代码模板</h2>
<p>只要按照上面的文档给出的步凑来实现就可以实现该用户自定义的平台类，UShare给出了用户自定义的类的模板类:</p>
<p><strong>UMSocialTemplateHandler.h</strong>,</p>
<p><strong>UMSocialTemplateHandler.m</strong>,</p>
<p>用户可以下载模板文件修改成自己的类名和平台类型，在对应的函数调用处实现自己的方法。
至此用户自定义的平台类已经实现完毕。</p>
<h1>U-Share API说明</h1>
<h2>引用头文件</h2>
<pre><code>#import &lt;UMSocialCore/UMSocialCore.h&gt;
</code></pre>

<h2>接口类UMSocialManager</h2>
<h3>获取类实例</h3>
<pre><code>[UMSocialManager defaultManager]
</code></pre>

<h3>打开日志</h3>
<pre><code>/**
 *  打开日志
 *
 *  @param isOpen YES代表打开，No代表关闭
 */
- (void)openLog:(BOOL)isOpen;
</code></pre>

<h3>设置平台的appkey</h3>
<pre><code>/**
 *  设置平台的appkey
 *
 *  @param platformType 平台类型 @see UMSocialPlatformType
 *  @param appKey       appKey 
 *  @param appSecret    appSecret （有些平台没有，可以不传）
 *  @param redirectURL  redirectURL （回调地址）
 */
- (BOOL)setPlaform:(UMSocialPlatformType)platformType
            appKey:(NSString *)appKey
         appSecret:(NSString *)appSecret
       redirectURL:(NSString *)redirectURL;

</code></pre>

<h3>分享接口</h3>
<pre><code>/**
 *  分享接口
 *
 *  @param platformType @see UMSocialPlatformType
 *  @param shareObject
 *  @param currentViewController 用于弹出类似邮件分享、短信分享等这样的系统页面
 *  @param completion   回调
 *  @discuss currentViewController 只正对sms,email等平台需要传入viewcontroller的平台，其他不需要的平台可以传入nil
 */
- (void)shareToPlatform:(UMSocialPlatformType)platformType
          messageObject:(UMSocialMessageObject *)messageObject
  currentViewController:(id)currentViewController
             completion:(UMSocialRequestCompletionHandler)completion;
</code></pre>

<h3>授权并获取用户信息接口</h3>
<pre><code>/**
 *  授权并获取用户信息
 *  @param currentViewController 用于弹出类似邮件分享、短信分享等这样的系统页面
 *  @param completion   回调
 */
- (void)getUserInfoWithPlatform:(UMSocialPlatformType)platformType
          currentViewController:(id)currentViewController
                     completion:(UMSocialRequestCompletionHandler)completion;
</code></pre>

<pre><code>/**
 *  获得从sso或者web端回调到本app的回调
 *
 *  @param url 第三方sdk的打开本app的回调的url
 *
 *  @return 是否处理  YES代表处理成功，NO代表不处理
 */
-(BOOL)handleOpenURL:(NSURL *)url;
</code></pre>

<pre><code>/**
 *  动态的增加用户自定义的PlatformProvider
 *
 *  @param userDefinePlatformProvider 用户自定义的userDefinePlatformProvider必须实现UMSocialPlatformProvider
 *  @param platformType               @see platformType platformType的有效范围在 （UMSocialPlatformType_UserDefine_Begin,UMSocialPlatformType_UserDefine_End)之间
 *
 *  @return YES代表返回成功,NO代表失败
 *  @disuss 在调用此函数前，必须先设置对应的平台的配置信息 @see - (BOOL)setPlaform:(UMSocialPlatformType)platformType appKey:(NSString *)appKey appSecret:(NSString *)appSecret redirectURL:(NSString *)redirectURL;
 */
-(BOOL)addAddUserDefinePlatformProvider:(id&lt;UMSocialPlatformProvider&gt;)userDefinePlatformProvider
             withUserDefinePlatformType:(UMSocialPlatformType)platformType;
</code></pre>

<h3>取消授权接口</h3>
<pre><code>/**
 *  取消授权
 *
 *  @param platformType @see UMSocialPlatformType
 *  @param completion   回调
 */
- (void)cancelAuthWithPlatform:(UMSocialPlatformType)platformType
                    completion:(UMSocialRequestCompletionHandler)completion;

</code></pre>

<h3>判断平台是否安装</h3>
<pre><code>/**
 *  平台是否安装
 *
 *  @param platformType 平台类型 @see UMSocialPlatformType
 *
 *  @return YES 代表安装，NO 代表未安装
 *  @note 在判断QQ空间的App的时候，QQApi判断会出问题
 */
-(BOOL) isInstall:(UMSocialPlatformType)platformType;
</code></pre>

<h3>动态的删除PlatformProvider，不管是预定义还是用户自定义的</h3>
<pre><code>/**
 *  动态的删除不想显示的平台，不管是预定义还是用户自定义的
 *
 *  @param platformTypeArray 平台类型数组
 */
-(void) removePlatformProviderWithPlatformTypes:(NSArray *)platformTypeArray;
/**
 *  动态的删除PlatformProvider，不管是预定义还是用户自定义的
 *
 *  @param platformType @see UMSocialPlatformType
 */
-(void) removePlatformProviderWithPlatformType:(UMSocialPlatformType)platformType;

/**
 *  获得对应的平台类型platformType的PlatformProvider
 *
 *  @param platformType @see platformType
 *
 *  @return 返回继承UMSocialPlatformProvider的handle
 */
-(id&lt;UMSocialPlatformProvider&gt;)platformProviderWithPlatformType:(UMSocialPlatformType)platformType;
</code></pre>

<h2>分享内容类</h2>
<h3>第三方SDK支持的分享数据类型</h3>
<table class="table table-bordered table-striped table-condensed">

<tr>
<td>平台</td>
<td>文本</td>
<td>图片</td>
<td>图文</td>
<td>Web链接</td>
<td>视频链接</td>
<td>音乐链接</td>
<td>其他</td>
</tr>

<tr>
<td>微信好友</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>小程序、gif表情及文件</td>
</tr>
<tr>
<td>微信朋友圈</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>-</td>
</tr>
<tr>
<td>微信收藏</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>文件</td>
</tr>
<tr>
<td>新浪微博</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>-</td>
</tr>
<tr>
<td>QQ</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>-</td>
</tr>
<tr>
<td>QQ空间</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>-</td>
</tr>
<tr>
<td>支付宝</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>-</td>
</tr>
<tr>
<td>钉钉</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>√</td>
<td>×</td>
<td>×</td>
<td>-</td>
</tr>
<tr>
<td>点点虫</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>-</td>
</tr>
<tr>
<td>易信</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>-</td>
</tr>
<tr>
<td>豆瓣</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>-</td>
</tr>
<tr>
<td>人人</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>-</td>
</tr>
<tr>
<td>腾讯微博</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>-</td>
</tr>
<tr>
<td>有道云笔记</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>文件</td>
</tr>
<tr>
<td>印象笔记</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>文件</td>
</tr>
<tr>
<td>有道云笔记</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>-</td>
</tr>
<tr>
<td>Linkedin(领英)</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>图片链接必须为网络链接，不支持本地图片</td>
</tr>
<tr>
<td>Facebook</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>-</td>
</tr>
<tr>
<td>FaceBookMessenger</td>
<td>×</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>-</td>
</tr>
<tr>
<td>Twitter</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>-</td>
</tr>
<tr>
<td>Instagram</td>
<td>×</td>
<td>√</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>-</td>
</tr>
<tr>
<td>Kakao</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>-</td>
</tr>
<tr>
<td>Line</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>-</td>
</tr>
<tr>
<td>Tumblr</td>
<td>√</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>-</td>
</tr>
<tr>
<td>Pinterest</td>
<td>×</td>
<td>√</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>图片必须为网络链接</td>
</tr>
<tr>
<td>WhatsApp</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>-</td>
</tr>
<tr>
<td>Flickr</td>
<td>×</td>
<td>√</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>-</td>
</tr>
<tr>
<td>Google+</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>-</td>
</tr>
<tr>
<td>Pocket</td>
<td>×</td>
<td>√</td>
<td>×</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>图片为网络链接</td>
</tr>
<tr>
<td>VKontakte</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>-</td>
</tr>
<tr>
<td>DropBox</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>文件</td>
</tr>
<tr>
<td>短信</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>-</td>
</tr>
<tr>
<td>邮件</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>-</td>
</tr>
</table>

<h3>分享消息类UMSocialMessageObject</h3>
<pre><code>@interface UMSocialMessageObject : NSObject


/**
 * @param text 文本内容
 * @note 非纯文本分享文本
 */
@property (nonatomic, copy) NSString  *text;

/**
 * 分享的所媒体内容对象
 */
@property (nonatomic, strong) UMShareObject *shareObject;

/**
 * 其他相关参数，见相应平台说明
 */
@property (nonatomic, strong) NSDictionary *moreInfo;

+ (UMSocialMessageObject *)messageObject;

+ (UMSocialMessageObject *)messageObjectWithMediaObject:(id)mediaObject;


@end
</code></pre>

<h3>基本分享类型UMShareObject</h3>
<p>UMShareObject是所有多媒体内容的基类，多媒体内容包括图片、音乐、视频、网页等。纯文本分享不属于多媒体，只需要设置UMSocialMessageObject的text属性就可以。</p>
<pre><code>@interface UMShareObject : NSObject
/**
 * 标题
 * @note 标题的长度依各个平台的要求而定
 */
@property (nonatomic, copy) NSString *title;

/**
 * 描述
 * @note 描述内容的长度依各个平台的要求而定
 */
@property (nonatomic, copy) NSString *descr;

/**
 * 缩略图 UIImage或者NSData类型或者NSString类型（图片url）
 */
@property (nonatomic, strong) id thumbImage;


/**
 * @param title 标题
 * @param descr 描述
 * @param thumImage 缩略图（UIImage或者NSData类型，或者image_url）
 *
 */
+ (id)shareObjectWithTitle:(NSString *)title
                     descr:(NSString *)descr
                 thumImage:(id)thumImage;
+ (void)um_imageDataWithImage:(id)image completion:(void (^)(NSData *image))completion;
@end
</code></pre>

<h3>分享图片类（参考父类UMShareObject）</h3>
<pre><code>@interface UMShareImageObject : UMShareObject

/** 图片内容 （可以是UIImage类对象，也可以是NSdata类对象，也可以是图片链接imageUrl NSString类对象）
 * @note 图片大小根据各个平台限制而定
 */
@property (nonatomic, retain) id shareImage;

@end
</code></pre>

<h3>分享音乐数据结构（参考父类UMShareObject）</h3>
<pre><code>@interface UMShareMusicObject : UMShareObject

/** 音乐网页的url地址
 * @note 长度不能超过10K
 */
@property (nonatomic, retain) NSString *musicUrl;
/** 音乐lowband网页的url地址
 * @note 长度不能超过10K
 */
@property (nonatomic, retain) NSString *musicLowBandUrl;
/** 音乐数据url地址
 * @note 长度不能超过10K
 */
@property (nonatomic, retain) NSString *musicDataUrl;

/**音乐lowband数据url地址
 * @note 长度不能超过10K
 */
@property (nonatomic, retain) NSString *musicLowBandDataUrl;

@end
</code></pre>

<h3>分享视频数据结构（参考父类UMShareObject）</h3>
<pre><code>@interface UMShareVideoObject : UMShareObject

/**
 视频网页的url

 @warning 不能为空且长度不能超过255
 */
@property (nonatomic, strong) NSString *videoUrl;

/**
 视频lowband网页的url

 @warning 长度不能超过255
 */
@property (nonatomic, strong) NSString *videoLowBandUrl;

/**
 视频数据流url

 @warning 长度不能超过255
 */
@property (nonatomic, strong) NSString *videoStreamUrl;

/**
 视频lowband数据流url

 @warning 长度不能超过255
 */
@property (nonatomic, strong) NSString *videoLowBandStreamUrl;

@end
</code></pre>

<h3>分享网页数据结构（参考父类UMShareObject）</h3>
<pre><code>@interface UMShareWebpageObject : UMShareObject

/** 网页的url地址
 * @note 不能为空且长度不能超过10K
 */
@property (nonatomic, retain) NSString *webpageUrl;

@end
</code></pre>

<h3>邮件分享数据结构（参考父类UMShareObject）</h3>
<pre><code>/*! @brief 分享消息中的邮件分享对象
 *
 * @see UMShareObject
 */
@interface UMShareEmailObject : UMShareObject

/**
 * 接收人
 */
@property (nonatomic, strong) NSArray *toRecipients;

/**
 * 抄送人
 */
@property (nonatomic, strong) NSArray *ccRecipients;

/**
 * 密送人
 */
@property (nonatomic, strong) NSArray *bccRecipients;

/**
 * 文本内容
 */
@property (nonatomic, copy) NSString *emailContent;

/**
 * 图片
 */
@property (nonatomic, strong) id emailImage;

/**
 * 文件（NSData）
 */
@property (nonatomic, strong) NSData *emailSendData;

/**
 * 文件格式
 */
@property (nonatomic, copy) NSString *fileType;

/**
 * 文件名
 */
@property (nonatomic, copy) NSString *fileName;

@end
</code></pre>

<h3>短信分享数据结构（参考父类UMShareObject）</h3>
<pre><code>/*! @brief 分享消息中的短信分享对象
 *
 * @see UMSocialMessageObject
 */
@interface UMShareSmsObject : UMShareObject

/**
 * 接收人
 */
@property (nonatomic, strong) NSArray *recipients;

/**
 * 文本内容
 */
@property (nonatomic, copy) NSString *smsContent;

/**
 * 图片
 */
@property (nonatomic, strong) id smsImage;

/**
 * 文件数据（NSData）
 */
@property (nonatomic, strong) NSData *smsSendData;

/**
 * 文件格式
 */
@property (nonatomic, copy) NSString *fileType;

/**
 * 文件名称
 */
@property (nonatomic, copy) NSString *fileName;

/**
 * 文件地址url
 */
@property (nonatomic, copy) NSString *fileUrl;

@end
</code></pre>

<h3>分享微信小程序（参考父类UMShareObject）</h3>
<pre><code>@interface WXMiniProgramObject : NSObject

/*! @brief WXMiniProgramObject对象
 *
 * @note 返回的WXMiniProgramObject对象是自动释放的
 */
+(WXMiniProgramObject *) object;

@property (nonatomic, strong) NSString *webpageUrl; //低版本网页链接

@property (nonatomic, strong) NSString *userName;   //小程序username

@property (nonatomic, strong) NSString *path;       //小程序页面的路径

@end
</code></pre>

<h2>分享回调类</h2>
<h3>接口返回数据结构基类</h3>
<pre><code>@interface UMSocialResponse : NSObject

@property (nonatomic, copy) NSString  *uid;//用户id
@property (nonatomic, copy) NSString  *openid;//QQ，微信用户openid，其他平台没有
@property (nonatomic, copy) NSString  *refreshToken;//
@property (nonatomic, copy) NSDate    *expiration;//授权token（accessToken）过期时间
@property (nonatomic, copy) NSString  *accessToken;
@property (nonatomic, copy) NSString  *unionId;
/**
 usid 兼容U-Share 4.x/5.x 版本，与4/5版本数值相同
 即，对应微信平台：openId，QQ平台openId，其他平台不变
 */
@property (nonatomic, copy) NSString  *usid;

@property (nonatomic, assign) UMSocialPlatformType  platformType;//对应的平台类型
/**
 * 第三方原始数据
 */
@property (nonatomic, strong) id  originalResponse;

@end
</code></pre>

<h3>分享结果数据结构</h3>
<pre><code>@interface UMSocialShareResponse : UMSocialResponse

@property (nonatomic, copy) NSString  *message;//分享结果提示信息

+ (UMSocialShareResponse *)shareResponseWithMessage:(NSString *)message;

@end
</code></pre>

<h3>授权结果数据结构</h3>
<pre><code>@interface UMSocialAuthResponse : UMSocialResponse

@end
</code></pre>

<h3>获取用户信息结果数据结构</h3>
<pre><code>@interface UMSocialUserInfoResponse : UMSocialResponse
/**
 第三方平台昵称
 */
@property (nonatomic, copy) NSString  *name;

/**
 第三方平台头像地址
 */
@property (nonatomic, copy) NSString  *iconurl;

/**
 通用平台性别属性
 QQ、微信、微博返回 &quot;男&quot;, &quot;女&quot;
 Facebook返回 &quot;male&quot;, &quot;female&quot;
 */
@property (nonatomic, copy) NSString  *unionGender;

@end
</code></pre>

<h2>全局配置类</h2>
<h3>第三方平台参数限制相关配置</h3>
<p>U-Share增加了对分享类型的限制，比如对文本的截断，对图片的裁剪，以便用户能够不用考虑平台的限制而成功的分享出去。
目前主要对新浪、微信、QQ及Facebook和Twitter平台做了分享参数处理。</p>
<h4>配置类</h4>
<p>其类别如下（请查看UMSocialHandler.h文件）：</p>
<pre><code>@interface UMSocialHandler (UMSocialLimit)
-(BOOL) checkText:(NSString*)text withTextLimit:(NSUInteger)textLimit;

-(BOOL) checkData:(NSData*)data withDataLimit:(NSUInteger)dataLimit;

-(NSString*)truncationText:(NSString*)text withTextLimit:(NSUInteger)textLimit;

-(NSData*)compressImageData:(NSData*)imageData withImageLimit:(NSUInteger)imageLimit;

@end

</code></pre>

<h4>每个分享类型对应相关的分享配置类：</h4>
<pre><code>
UMSocialShareTextObject ---&gt; UMSocialShareTextObjectConfig

UMSocialShareImageObject ---&gt; UMSocialShareImageObjectConfig

UMSocialShareMusicObject ---&gt;UMSocialShareMusicObjectConfig

UMSocialShareVideoObject ---&gt; UMSocialShareVideoObjectConfig

UMSocialShareWebpageObject ---&gt; UMSocialShareVideoObjectConfig

UMSocialShareEmailObject ---&gt; UMSocialShareEmailObjectConfig

UMSocialShareSmsObject ---&gt; UMSocialShareSmsObjectConfig

UMSocialShareEmotionObject ---&gt; UMSocialShareEmotionObjectConfig

UMSocialShareFileObject ---&gt; UMSocialShareFileObjectConfig

</code></pre>

<h4>操作设置</h4>
<p>增加了UMSocialGlobal的全局设置字段 ：</p>
<p>thumblr_Tag thumblr平台需要作为标示的字段 tag</p>
<p>isTruncateShareText 对平台的分享文本的时候，做规定的截断，默认开启</p>
<blockquote>
<p>简言之，开发者可以通过调用
[UMSocialGlobal shareInstance].isTruncateShareText = NO;
设置不进行文本截断等额外处理，但在文本过长时会收到第三方平台SDK返回的错误。</p>
</blockquote>
<p><strong>isUsingHttpsWhenShareContent</strong> 当前网络请求是否用https</p>
<ul>
<li>
<p>针对ios9系统以后强制使用https的网络请求，针对分享的网络图片都必须是https的网络图片(此为苹果官方要求)</p>
</li>
<li>
<p>该函数默认开启https请求</p>
</li>
<li>
<p>如果开启ios9的请求后，自动会过滤ios的http的请求，并返回错误</p>
</li>
</ul>
<p><strong>isClearCacheWhenGetUserInfo</strong>
是否清除缓存在获得用户资料的时候，此需求存在用户切换账号的时候，获得用户信息的时候用缓存的数据申请导致用户信息错误。</p>
<ul>
<li>默认设置为YES,代表请求用户的时候需要请求缓存</li>
</ul>
<p>NO,代表不清除缓存，用缓存的数据请求用户数据</p>
<p><strong>isUsingWaterMark</strong>
是否分享图片的时候，加入水印功能。如果开启的话，可以通过图片的水印配置类warterMarkConfig来配置水印。</p>
<p>目前水印只提供图片水印功能。
设置图片水印的配置类为:
<em>  UMSocialWarterMarkConfig 水印配置类,方便以后扩展其他的水印形式
</em>  UMSocialImageWarterMarkConfig 图片配置类</p>
<p>用户可以通过以下两种方式来配置用户自定义的水印</p>
<ul>
<li>如果用户用默认的参数,只想换水印图片的情况。</li>
</ul>
<p>step1:</p>
<p>可以直接把路径 <strong>UMSocialSDKResources.bundle/UMSocialWaterMark/umsocial_defaultwatermark.png</strong> 下的图片换成自己的水印图片.</p>
<p><strong>注意图片的名字和后缀必须一样</strong></p>
<p>step2:
在分享前设置开启水印。</p>
<pre><code>    [UMSocialGlobal shareInstance].isUsingWaterMark = YES;

</code></pre>

<ul>
<li>如果用户用自己自定义的参数和水印图片的情况。</li>
</ul>
<p>step1:
在分享前设置开启水印。</p>
<pre><code>    [UMSocialGlobal shareInstance].isUsingWaterMark = YES;

</code></pre>

<p>step2:创建配置水印类，并赋值给warterMarkConfig</p>
<pre><code>    //创建图片水印配置类
    UMSocialImageWarterMarkConfig* imageWarterMarkConfig= [[UMSocialImageWarterMarkConfig alloc] init];
    imageWarterMarkConfig.warterMarkImage = [UIImage imageNamed:@&quot;auth_icon&quot;];
    imageWarterMarkConfig.warterMarkImageAlpha = 0.7;
    imageWarterMarkConfig.warterMarkImageScale = 0.4;
    imageWarterMarkConfig.paddingToHorizontalParentBorder = 20;
    imageWarterMarkConfig.paddingToVerticalParentBorder = 20;

    //创建水印配置类
    UMSocialWarterMarkConfig* warterMarkConfig = [[UMSocialWarterMarkConfig alloc] init];
    warterMarkConfig.stringAndImageWarterMarkPositon = UMSocialOnlyImageWarterMarkTopRight;
    [warterMarkConfig setUserDefinedImageWarterMarkConfig:imageWarterMarkConfig];

    //设置水印配置类
    [UMSocialGlobal shareInstance].warterMarkConfig = warterMarkConfig;

</code></pre>

<h3>豆瓣、人人、腾讯微博授权编辑页面配置</h3>
<pre><code>#import &lt;UMSocialCore/UMSocialPlatformConfig.h&gt;

/**
 * 云端授权/分享编辑页面配置类
 * 云端授权/分享页面目前适用于腾讯微博、豆瓣、人人的授权和分享编辑页面的自定义配置
 */
@interface UMSocialCloudViewConfig : NSObject

/**
 授权页面
 */
@property (nonatomic, strong) NSString *authViewTitle;
@property (nonatomic, strong) UIColor *authViewTitleColor;
@property( nonatomic, strong) UIColor *authViewNavBarColor;
// button仅需改动title或image即可，touch事件内部触发
@property (nonatomic, strong) UIButton *authViewCloseButton;

@property (nonatomic, strong) NSString *editViewTitle;
@property (nonatomic, strong) UIColor *editViewTitleColor;
@property( nonatomic, strong) UIColor *editViewNavBarColor;
// button仅需改动title或image即可，touch事件内部触发
@property (nonatomic, strong) UIButton *editViewCloseButton;
@property (nonatomic, strong) UIButton *editViewShareButton;

</code></pre>